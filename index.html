<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kasi Small Business Chatbot Algorithm directory helps local businesses connect with their community in South Africa through geo-location tracking and a chatbot.">
    <meta name="keywords" content="township business, small business directory, kasi business, South Africa, GPS tracking, chatbot, Gemini Chatbot, local business">
    <meta name="author" content="Mafisa Tech Affiliate Pty Ltd">
    <title>Township Small Business Chatbot Directory</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom CSS */
        body {
            font-family: 'Arial', sans-serif;
        }
        /* Stunning Orange Theme */
        .bg-orange-500 {
            background-color: #FF6F00;
        }
        .hover\:bg-orange-700:hover {
            background-color: #E65100;
        }
        .text-orange-500 {
            color: #FF6F00;
        }
        .border-orange-500 {
            border-color: #FF6F00;
        }
        .shadow-orange {
            box-shadow: 0 4px 6px rgba(255, 111, 0, 0.5);
        }
        /* Chatbot Styles */
        #chatbot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-width: 100%;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            overflow: hidden;
            display: none; /* Start hidden */
            z-index: 1000;
        }
        #chatbot-header {
            background: #FF6F00;
            color: white;
            padding: 10px;
            text-align: center;
        }
        #chatbot-messages {
            height: 300px;
            overflow-y: auto;
            padding: 10px;
        }
        #chatbot-input {
            display: flex;
            padding: 10px;
        }
        #userInput {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #sendButton {
            background-color: #FF6F00;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        /* Business Listings */
        .business-item {
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai/dist/index.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-orange-500 p-6 text-white text-center shadow-orange">
        <h1 class="text-4xl font-bold">Township Business Directory</h1>
        <nav id="menu" class="mt-4 flex justify-center space-x-6">
            <!-- Dynamic Menu will be injected here -->
        </nav>
    </header>

    <!-- Register Business Section -->
    <section id="register" class="mt-12">
        <h2 class="text-center text-3xl font-bold mb-8 text-orange-500">Register Your Business</h2>
        <form id="businessForm" class="bg-white shadow-md rounded px-10 pt-8 pb-8 mb-12 max-w-xl mx-auto border-t-8 border-orange-500" enctype="multipart/form-data">
            <div class="mb-6">
                <label for="businessName" class="block text-gray-700 text-sm font-bold mb-3">Business Name:</label>
                <input type="text" id="businessName" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500">
            </div>
            <div class="mb-6">
                <label for="businessDescription" class="block text-gray-700 text-sm font-bold mb-3">Business Description:</label>
                <textarea id="businessDescription" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500"></textarea>
            </div>
            <div class="mb-6">
                <label for="businessImage" class="block text-gray-700 text-sm font-bold mb-3">Upload Products/Services Image:</label>
                <input type="file" id="businessImage" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500">
            </div>
            <div class="mb-6">
                <label for="businessEmail" class="block text-gray-700 text-sm font-bold mb-3">Business Email:</label>
                <input type="email" id="businessEmail" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500">
            </div>
            <div class="mb-6">
                <label for="businessPhone" class="block text-gray-700 text-sm font-bold mb-3">Business Phone:</label>
                <input type="text" id="businessPhone" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500">
            </div>
            <div class="mb-6">
                <label for="businessAddress" class="block text-gray-700 text-sm font-bold mb-3">Business Address:</label>
                <input type="text" id="businessAddress" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-orange-500">
            </div>
            <button type="submit" class="bg-orange-500 hover:bg-orange-700 text-white font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline shadow-orange">Submit</button>
        </form>
    </section>

    <!-- Business Listings Section -->
    <section id="business-list" class="bg-white shadow-md rounded px-8 py-8 mb-12 max-w-xl mx-auto border-t-8 border-orange-500">
        <h2 class="text-center text-3xl font-bold mb-6 text-orange-500">Business Listings</h2>
        <div id="listings" class="space-y-6">
            <div class="business-item">
                <h3 class="font-bold">Kasi Groceries</h3>
                <p>A local grocery store offering a wide range of everyday essentials, fresh produce, and household items. Kasi Groceries focuses on providing quality products at affordable prices, serving the community's needs.</p>
                <p>Contact: 079-3456789</p>
                <p>Email: sphandi@gmail.com</p>
            </div>
            <div class="business-item">
                <h3 class="font-bold">Orange Farm Hardware</h3>
                <p>A hardware store supplying building materials, tools, and home improvement supplies. Orange Farm Hardware caters to both DIY enthusiasts and professional contractors, ensuring that customers have access to everything they need for their projects.</p>
                <p>Contact: 011-8506790</p>
                <p>Email: info@farmhardware.co.za</p>
            </div>
            <div class="business-item">
                <h3 class="font-bold">Tshiamo Catering Services</h3>
                <p>A catering service specializing in traditional South African cuisine for events and gatherings. Tshiamo Catering Services prides itself on using fresh, locally sourced ingredients to create delicious meals that bring people together.</p>
                <p>Contact: 063-3456791</p>
                <p>Email: manzuza@gmail.com</p>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section id="map" class="bg-white shadow-md rounded px-8 py-8 mb-12 max-w-xl mx-auto border-t-8 border-orange-500">
        <h2 class="text-center text-3xl font-bold mb-6 text-orange-500">Find Us on the Map</h2>
        <div id="map-container" style="height: 300px;"></div>
    </section>

    <!-- Chatbot Section -->
    <section id="chatbot">
        <div id="chatbot-header">
            <h2>Chat with Us!</h2>
            <button id="closeChat" style="float: right; background: transparent; border: none; color: white;">&times;</button>
        </div>
        <div id="chatbot-messages"></div>
        <div id="chatbot-input">
            <input type="text" id="userInput" placeholder="Type your message here..." />
            <button id="sendButton">Send</button>
        </div>
    </section>
    <button id="openChat" class="fixed bottom-5 right-5 bg-orange-500 hover:bg-orange-700 text-white rounded-full p-4 shadow-lg">
        ðŸ’¬
    </button>

    <!-- Footer -->
    <footer class="bg-orange-500 p-4 text-white text-center">
        <p>&copy; 2024 Mafisa Tech Affiliate Pty Ltd. All Rights Reserved.</p>
    </footer>

    <script>
        // Initialize the map
        const map = L.map('map-container').setView([-26.3798, 28.4600], 12); // Set to Orange Farm coordinates

        // Set up the tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        // Add a marker for the business location
        L.marker([-26.3798, 28.4600]).addTo(map)
            .bindPopup('Welcome to Orange Farm!')
            .openPopup();

        // Chatbot functionality
        const chatbot = document.getElementById('chatbot');
        const openChatButton = document.getElementById('openChat');
        const closeChatButton = document.getElementById('closeChat');
        const messagesContainer = document.getElementById('chatbot-messages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');

        openChatButton.onclick = function () {
            chatbot.style.display = 'block'; // Show the chatbot
        };

        closeChatButton.onclick = function () {
            chatbot.style.display = 'none'; // Hide the chatbot
        };

        sendButton.onclick = async function () {
            const userMessage = userInput.value;
            if (!userMessage) return;

            // Add user message to the chat
            messagesContainer.innerHTML += `<div><strong>You:</strong> ${userMessage}</div>`;
            userInput.value = ''; // Clear input field

            // Call Gemini API or your chatbot API
            const response = await callGeminiChatbot(userMessage);
            messagesContainer.innerHTML += `<div><strong>Chatbot:</strong> ${response}</div>`;
        };

        async function callGeminiChatbot(userMessage) {
            // Replace with actual API call to your Gemini chatbot
            const response = await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBu29op0LemGPSu3adIzZCF9SS-ecngRM4', {
                message: userMessage
            });
            return response.data.reply; // Adjust according to your response structure
        }
    </script>
</body>
</html>


   





